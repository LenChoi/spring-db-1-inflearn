# 스프링 DB 1편 - 데이터 접근 핵심 원리 (인프런 김영한)

## JDBC
자바에서 데이터베이스에 접속할 수 있도록 하는 자바 API
자바는 표준 인터페이스를 정의해두었고 각각의 db 회사에서 자신의 db에 맞도록 구현해서 라이브러리로 제공
이것을 JDBC 드라이버라고 함.

## SQL Mapper
애플리케이션 로직 -> SQL Mapper -> JDBC
장점
- JDBC를 편리하게 사용하도록 도와줌
- JDBC의 반복 코드를 제거해줌
단점
- 개발자가 SQL을 직접 작성해야함.
- 대표기술: 스프링 JDBC Template, MyBatis

## ORM 기술
객체를 관계형 데이터베이스 테이블과 매핑해주는 기술
JPA는 자바 진영의 ORM 표준 인터페이스, 이것을 구현한 것으로 하이버네이트와 이클립스 링크 등

둘다 JDBC를 이용하지만 어떻게 동작하는지 기본 원리는 알아놓자!

H2 데이터베이스 드라이버는 JDBC Connection 인터페이스를 구현한 org.h2.jdbc.jdbcConnection 구현체를 제공

## 커넥션 풀 이해
1. 애플리케이션 로직은 DB 드라이버를 통해 커넥션을 조회
2. DB 드라이버는 DB와 TCP/IP 커넥션을 연결
3. DB 드라이버는 TCP/IP 커넥션이 연결되면 ID, PW와 기타 부가 정보를 DB에 전달
4. DB는 ID, PW를 통해 내부 인증을 완료하고, 내부에 DB 세션을 생성
5. DB는 커넥션 생성이 완료되었다는 응답을 보냄
6. DB 드라이버는 커넥션 객체를 생성해서 클라이언트에 반환

고객이 애플리케이션을 사용할때 SQL을 실행하는 시간 뿐 아니라 커넥션을 새로 만드는 시간이 추가되기 때문에 응답 속도에 영향을 준다.

따라서 커넥션을 미리 만들어서 사용하는 커넥션 풀을 사용한다.

이미 연결되어있는 커넥션 풀을 여러개 만들고 요청 즉시 SQL을 DB에 전달할 수 있다.

커넥션풀에 커넥션을 요청하면 자신이 가지고 있는 커넥션 중에 하나를 반환한다.
커넥션을 모두 사용하고 나면 커넥션을 종료하는 것이 아닌 살아있는 상태로 커넥션 풀에 반
스프링부트 2.0 부터는 기본 커넥션 풀로 hikariCP를 제공

## 트랜잭션 ACID
- 원자성
- 일관성
- 격리성
- 지속성

자동 커밋: sql 실행마다 자동으로 커밋을 호출함(Default) -> 우리가 원하는 트랜잭션 기능을 제대로 사용 할 수 없다
수동 커밋: commit, rollback을 직접 호출 